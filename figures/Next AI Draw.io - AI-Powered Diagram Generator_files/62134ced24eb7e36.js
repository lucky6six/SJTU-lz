(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t,n;var r=e.i(47167),l=e.i(43476),a=e.i(71645);let i=(0,a.forwardRef)((e,t)=>{var n;let r,l,i,{autosave:o=!1,baseUrl:u,urlParameters:s,configuration:c,xml:d,csv:f,exportFormat:p,onAutoSave:m,onSave:g,onClose:h,onLoad:v,onConfigure:y,onDraft:b,onExport:x,onMerge:w,onPrompt:E,onTemplate:z}=e,S=(0,a.useRef)(null),k=(r=(e,t)=>{S.current?.contentWindow?.postMessage(JSON.stringify({action:e,...t}),"*")},{load:e=>{r("load",e)},configure:e=>{r("configure",e)},merge:e=>{r("merge",e)},dialog:e=>{r("dialog",e)},prompt:e=>{r("prompt",e)},template:e=>{r("template",e)},layout:e=>{r("layout",e)},draft:e=>{r("draft",e)},status:e=>{r("status",e)},spinner:e=>{r("spinner",e)},exportDiagram:e=>{r("export",e)}}),C=(n=!!c,l=new URL("/",u??"https://embed.diagrams.net"),(i=new URLSearchParams).append("embed","1"),i.append("proto","json"),n&&i.append("configure","1"),s&&Object.keys(s).forEach(e=>{let t=s[e];void 0!==t&&("boolean"==typeof t?i.append(e,t?"1":"0"):i.append(e,t.toString()))}),l.search=i.toString(),l.toString()),[I,N]=(0,a.useState)(!1),R=e=>{var t={init:()=>{N(!0)},load:e=>{v&&v(e)},configure:e=>{c&&k.configure({config:c}),y&&y(e)},autosave:e=>{m&&m(e)},save:e=>{k.exportDiagram({format:p||"xmlsvg",exit:e.exit,parentEvent:"save"})},exit:e=>{h&&h(e)},draft:e=>{b&&b(e)},export:e=>{g&&g({event:"save",xml:e.data,parentEvent:e.message.parentEvent||"export"}),x&&x(e),e.message.exit&&h&&h({event:"exit",modified:!0,parentEvent:e.message.parentEvent||"export"})},merge:e=>{w&&w(e)},prompt:e=>{E&&E(e)},template:e=>{z&&z(e)}};if(e.origin.includes("embed.diagrams.net")||!u||e.origin.includes(u))try{let n=JSON.parse(e.data);if(n.event in t){let e=t[n.event];e&&e(n)}}catch{}};return(0,a.useImperativeHandle)(t,()=>({...k}),[]),(0,a.useEffect)(()=>{let e={};I&&(e={...e=d?"xmlpng"===p?{xmlpng:d}:{xml:d}:f?{descriptor:{format:"csv",data:f}}:{xml:""},autosave:o},k.load(e))},[I,d,f,o]),(0,a.useEffect)(()=>(window.addEventListener("message",R),()=>{window.removeEventListener("message",R)}),[]),a.default.createElement("iframe",{className:"diagrams-iframe",src:C,ref:S,title:"Diagrams.net",style:{width:"100%",height:"100%",minWidth:"400px",minHeight:"400px",border:"none"}})});var o=e.i(63978),u=e.i(53017);let s=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),c=(0,a.createContext)(null);c.displayName="PanelGroupContext";let d="data-panel-group-direction",f="data-panel-group-id",p="data-resize-handle",m="data-panel-resize-handle-id",g=a.useLayoutEffect,h=a["useId".toString()],v="function"==typeof h?h:()=>null,y=0;function b(e=null){let t=v(),n=(0,a.useRef)(e||t||null);return null===n.current&&(n.current=""+y++),null!=e?e:n.current}function x({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:l,forwardedRef:i,id:o,maxSize:u,minSize:s,onCollapse:d,onExpand:p,onResize:m,order:h,style:v,tagName:y="div",...x}){let w=(0,a.useContext)(c);if(null===w)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:E,expandPanel:z,getPanelSize:S,getPanelStyle:k,groupId:C,isPanelCollapsed:I,reevaluatePanelConstraints:N,registerPanel:R,resizePanel:L,unregisterPanel:P}=w,A=b(o),$=(0,a.useRef)({callbacks:{onCollapse:d,onExpand:p,onResize:m},constraints:{collapsedSize:n,collapsible:r,defaultSize:l,maxSize:u,minSize:s},id:A,idIsFromProps:void 0!==o,order:h});(0,a.useRef)({didLogMissingDefaultSizeWarning:!1}),g(()=>{let{callbacks:e,constraints:t}=$.current,a={...t};$.current.id=A,$.current.idIsFromProps=void 0!==o,$.current.order=h,e.onCollapse=d,e.onExpand=p,e.onResize=m,t.collapsedSize=n,t.collapsible=r,t.defaultSize=l,t.maxSize=u,t.minSize=s,(a.collapsedSize!==t.collapsedSize||a.collapsible!==t.collapsible||a.maxSize!==t.maxSize||a.minSize!==t.minSize)&&N($.current,a)}),g(()=>{let e=$.current;return R(e),()=>{P(e)}},[h,A,R,P]),(0,a.useImperativeHandle)(i,()=>({collapse:()=>{E($.current)},expand:e=>{z($.current,e)},getId:()=>A,getSize:()=>S($.current),isCollapsed:()=>I($.current),isExpanded:()=>!I($.current),resize:e=>{L($.current,e)}}),[E,z,S,I,A,L]);let M=k($.current,l);return(0,a.createElement)(y,{...x,children:e,className:t,id:A,style:{...M,...v},[f]:C,"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-id":A,"data-panel-size":parseFloat(""+M.flexGrow).toFixed(1)})}let w=(0,a.forwardRef)((e,t)=>(0,a.createElement)(x,{...e,forwardedRef:t}));x.displayName="Panel",w.displayName="forwardRef(Panel)";let E=null,z=-1,S=null;function k(e,n,r){var l,a,i;let o=function(e,t,n){let r=(t&j)!=0,l=(t&D)!=0,a=(t&T)!=0,i=(t&O)!=0;if(t){if(r)if(a)return"se-resize";else if(i)return"ne-resize";else return"e-resize";else if(l)if(a)return"sw-resize";else if(i)return"nw-resize";else return"w-resize";else if(a)return"s-resize";else if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n,0);E!==o&&(E=o,null===S&&(S=document.createElement("style"),t&&S.setAttribute("nonce",t),document.head.appendChild(S)),z>=0&&(null==(i=S.sheet)||i.removeRule(z)),z=null!=(l=null==(a=S.sheet)?void 0:a.insertRule(`*{cursor: ${o} !important;}`))?l:-1)}function C(e){return"keydown"===e.type}function I(e){return e.type.startsWith("pointer")}function N(e){return e.type.startsWith("mouse")}function R(e){if(I(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(N(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let L=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function P(e){let t=e.length;for(;t--;){let n=e[t];if(Z(n,"Missing node"),function(e){var t;let n,r=getComputedStyle(e);return"fixed"===r.position||!!("auto"!==r.zIndex&&("static"!==r.position||"flex"===(n=getComputedStyle(null!=(t=M(e))?t:e).display)||"inline-flex"===n)||1>+r.opacity||"transform"in r&&"none"!==r.transform||"webkitTransform"in r&&"none"!==r.webkitTransform||"mixBlendMode"in r&&"normal"!==r.mixBlendMode||"filter"in r&&"none"!==r.filter||"webkitFilter"in r&&"none"!==r.webkitFilter||"isolation"in r&&"isolate"===r.isolation||L.test(r.willChange))||"touch"===r.webkitOverflowScrolling}(n))return n}return null}function A(e){return e&&Number(getComputedStyle(e).zIndex)||0}function $(e){let t=[];for(;e;)t.push(e),e=M(e);return t}function M(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let j=1,D=2,T=4,O=8,F="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),B=[],H=!1,G=new Map,U=new Map,W=new Set;function K(e){let{target:t}=e,{x:n,y:r}=R(e);H=!0,q({target:t,x:n,y:r}),Y(),B.length>0&&(Q("down",e),X(),e.preventDefault(),V(t)||e.stopImmediatePropagation())}function _(e){let{x:t,y:n}=R(e);if(H&&"pointerleave"!==e.type&&0===e.buttons&&(H=!1,Q("up",e)),!H){let{target:r}=e;q({target:r,x:t,y:n})}Q("move",e),X(),B.length>0&&e.preventDefault()}function J(e){let{target:t}=e,{x:n,y:r}=R(e);U.clear(),H=!1,B.length>0&&(e.preventDefault(),V(t)||e.stopImmediatePropagation()),Q("up",e),q({target:t,x:n,y:r}),X(),Y()}function V(e){let t=e;for(;t;){if(t.hasAttribute(p))return!0;t=t.parentElement}return!1}function q({target:e,x:t,y:n}){B.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),W.forEach(e=>{let{element:l,hitAreaMargins:a}=e,i=l.getBoundingClientRect(),{bottom:o,left:u,right:s,top:c}=i,d=F?a.coarse:a.fine;if(t>=u-d&&t<=s+d&&n>=c-d&&n<=o+d){if(null!==r&&document.contains(r)&&l!==r&&!l.contains(r)&&!r.contains(l)&&function(e,t){let n;if(e===t)throw Error("Cannot compare node with itself");let r={a:$(e),b:$(t)};for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;Z(n,"Stacking order can only be calculated for elements with a common ancestor");let l={a:A(P(r.a)),b:A(P(r.b))};if(l.a===l.b){let e=n.childNodes,t={a:r.a.at(-1),b:r.b.at(-1)},l=e.length;for(;l--;){let n=e[l];if(n===t.a)return 1;if(n===t.b)return -1}}return Math.sign(l.a-l.b)}(r,l)>0){let e=r,t=!1;for(;e;){var f;if(e.contains(l))break;if(f=e.getBoundingClientRect(),f.x<i.x+i.width&&f.x+f.width>i.x&&f.y<i.y+i.height&&f.y+f.height>i.y){t=!0;break}e=e.parentElement}if(t)return}B.push(e)}})}function X(){let e=!1,t=!1;B.forEach(n=>{let{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;U.forEach(e=>{n|=e}),e&&t?k("intersection",n,H):e?k("horizontal",n,H):t?k("vertical",n,H):null!==S&&(document.head.removeChild(S),E=null,S=null,z=-1)}function Y(){var e;null==(e=n)||e.abort();let t={capture:!0,signal:(n=new AbortController).signal};W.size&&(H?(B.length>0&&G.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("contextmenu",J,t),r.addEventListener("pointerleave",_,t),r.addEventListener("pointermove",_,t))}),G.forEach((e,n)=>{let{body:r}=n;r.addEventListener("pointerup",J,t),r.addEventListener("pointercancel",J,t)})):G.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("pointerdown",K,t),r.addEventListener("pointermove",_,t))}))}function Q(e,t){W.forEach(n=>{let{setResizeHandlerState:r}=n;r(e,B.includes(n),t)})}function Z(e,t){if(!e)throw console.error(t),Error(t)}function ee(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function et(e,t,n=10){return 0===ee(e,t,n)}function en(e,t,n){return 0===ee(e,t,n)}function er({panelConstraints:e,panelIndex:t,size:n}){let r=e[t];Z(null!=r,`Panel constraints not found for index ${t}`);let{collapsedSize:l=0,collapsible:a,maxSize:i=100,minSize:o=0}=r;return 0>ee(n,o)&&(n=a&&0>ee(n,(l+o)/2)?l:o),n=parseFloat((n=Math.min(i,n)).toFixed(10))}function el({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:l,trigger:a}){if(en(e,0))return t;let i=[...t],[o,u]=r;Z(null!=o,"Invalid first pivot index"),Z(null!=u,"Invalid second pivot index");let s=0;if("keyboard"===a){{let r=e<0?u:o,l=n[r];Z(l,`Panel constraints not found for index ${r}`);let{collapsedSize:a=0,collapsible:i,minSize:s=0}=l;if(i){let n=t[r];if(Z(null!=n,`Previous layout not found for panel index ${r}`),en(n,a)){let t=s-n;ee(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let r=e<0?o:u,l=n[r];Z(l,`No panel constraints found for index ${r}`);let{collapsedSize:a=0,collapsible:i,minSize:s=0}=l;if(i){let n=t[r];if(Z(null!=n,`Previous layout not found for panel index ${r}`),en(n,s)){let t=n-a;ee(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let r=e<0?1:-1,l=e<0?u:o,a=0;for(;;){let e=t[l];if(Z(null!=e,`Previous layout not found for panel index ${l}`),a+=er({panelConstraints:n,panelIndex:l,size:100})-e,(l+=r)<0||l>=n.length)break}let i=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-i:i}{let r=e<0?o:u;for(;r>=0&&r<n.length;){let l=Math.abs(e)-Math.abs(s),a=t[r];Z(null!=a,`Previous layout not found for panel index ${r}`);let o=er({panelConstraints:n,panelIndex:r,size:a-l});if(!en(a,o)&&(s+=a-o,i[r]=o,s.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!en(e[n],t[n],void 0))return!1;return!0}(l,i))return l;{let r=e<0?u:o,l=t[r];Z(null!=l,`Previous layout not found for panel index ${r}`);let a=l+s,c=er({panelConstraints:n,panelIndex:r,size:a});if(i[r]=c,!en(c,a)){let t=a-c,r=e<0?u:o;for(;r>=0&&r<n.length;){let l=i[r];Z(null!=l,`Previous layout not found for panel index ${r}`);let a=er({panelConstraints:n,panelIndex:r,size:l+t});if(en(l,a)||(t-=a-l,i[r]=a),en(t,0))break;e>0?r--:r++}}}return en(i.reduce((e,t)=>t+e,0),100)?i:l}function ea(e,t=document){return Array.from(t.querySelectorAll(`[${m}][data-panel-group-id="${e}"]`))}function ei(e,t,n=document){let r=ea(e,n).findIndex(e=>e.getAttribute(m)===t);return null!=r?r:null}function eo(e,t,n){let r=ei(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function eu(e,t=document){if((t instanceof HTMLElement||"object"==typeof t&&null!==t&&"tagName"in t&&"getAttribute"in t)&&t.dataset.panelGroupId==e)return t;let n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function es(e,t=document){let n=t.querySelector(`[${m}="${e}"]`);return n||null}function ec(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ed(e,t){let{x:n,y:r}=R(t);return"horizontal"===e?n:r}function ef(e,t,n){t.forEach((t,r)=>{let l=e[r];Z(l,`Panel data not found for index ${r}`);let{callbacks:a,constraints:i,id:o}=l,{collapsedSize:u=0,collapsible:s}=i,c=n[o];if(null==c||t!==c){n[o]=t;let{onCollapse:e,onExpand:r,onResize:l}=a;l&&l(t,c),s&&(e||r)&&(r&&(null==c||et(c,u))&&!et(t,u)&&r(),e&&(null==c||!et(c,u))&&et(t,u)&&e())}})}function ep(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function em(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function eg(e){return`react-resizable-panels:${e}`}function eh(e){return e.map(e=>{let{constraints:t,id:n,idIsFromProps:r,order:l}=e;return r?n:l?`${l}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function ev(e,t){try{let n=eg(e),r=t.getItem(n);if(r){let e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}function ey(e,t,n,r,l){var a;let i=eg(e),o=eh(t),u=null!=(a=ev(e,l))?a:{};u[o]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{l.setItem(i,JSON.stringify(u))}catch(e){console.error(e)}}function eb({layout:e,panelConstraints:t}){let n=[...e],r=n.reduce((e,t)=>e+t,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(e=>`${e}%`).join(", ")}`);if(!en(r,100)&&n.length>0)for(let e=0;e<t.length;e++){let t=n[e];Z(null!=t,`No layout data found for index ${e}`);let l=100/r*t;n[e]=l}let l=0;for(let e=0;e<t.length;e++){let r=n[e];Z(null!=r,`No layout data found for index ${e}`);let a=er({panelConstraints:t,panelIndex:e,size:r});r!=a&&(l+=r-a,n[e]=a)}if(!en(l,0))for(let e=0;e<t.length;e++){let r=n[e];Z(null!=r,`No layout data found for index ${e}`);let a=er({panelConstraints:t,panelIndex:e,size:r+l});if(r!==a&&(l-=a-r,n[e]=a,en(l,0)))break}return n}let ex={getItem:e=>(em(ex),ex.getItem(e)),setItem:(e,t)=>{em(ex),ex.setItem(e,t)}},ew={};function eE({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:l,id:i=null,onLayout:o=null,keyboardResizeBy:u=null,storage:s=ex,style:p,tagName:h="div",...v}){let y=b(i),x=(0,a.useRef)(null),[w,E]=(0,a.useState)(null),[z,S]=(0,a.useState)([]),k=function(){let[e,t]=(0,a.useState)(0);return(0,a.useCallback)(()=>t(e=>e+1),[])}(),R=(0,a.useRef)({}),L=(0,a.useRef)(new Map),P=(0,a.useRef)(0),A=(0,a.useRef)({autoSaveId:e,direction:r,dragState:w,id:y,keyboardResizeBy:u,onLayout:o,storage:s}),$=(0,a.useRef)({layout:z,panelDataArray:[],panelDataArrayChanged:!1});(0,a.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,a.useImperativeHandle)(l,()=>({getId:()=>A.current.id,getLayout:()=>{let{layout:e}=$.current;return e},setLayout:e=>{let{onLayout:t}=A.current,{layout:n,panelDataArray:r}=$.current,l=eb({layout:e,panelConstraints:r.map(e=>e.constraints)});ec(n,l)||(S(l),$.current.layout=l,t&&t(l),ef(r,l,R.current))}}),[]),g(()=>{A.current.autoSaveId=e,A.current.direction=r,A.current.dragState=w,A.current.id=y,A.current.onLayout=o,A.current.storage=s}),function({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:l,panelGroupElement:i,setLayout:o}){(0,a.useRef)({didWarnAboutMissingResizeHandle:!1}),g(()=>{if(!i)return;let e=ea(n,i);for(let t=0;t<l.length-1;t++){let{valueMax:n,valueMin:a,valueNow:i}=function({layout:e,panelsArray:t,pivotIndices:n}){let r=0,l=100,a=0,i=0,o=n[0];return Z(null!=o,"No pivot index found"),t.forEach((e,t)=>{let{constraints:n}=e,{maxSize:u=100,minSize:s=0}=n;t===o?(r=s,l=u):(a+=s,i+=u)}),{valueMax:Math.min(l,100-a),valueMin:Math.max(r,100-i),valueNow:e[o]}}({layout:r,panelsArray:l,pivotIndices:[t,t+1]}),o=e[t];if(null==o);else{let e=l[t];Z(e,`No panel data found for index "${t}"`),o.setAttribute("aria-controls",e.id),o.setAttribute("aria-valuemax",""+Math.round(n)),o.setAttribute("aria-valuemin",""+Math.round(a)),o.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[n,r,l,i]),(0,a.useEffect)(()=>{if(!i)return;let e=t.current;Z(e,"Eager values not found");let{panelDataArray:l}=e;Z(null!=eu(n,i),`No group found for id "${n}"`);let a=ea(n,i);Z(a,`No resize handles found for group id "${n}"`);let u=a.map(e=>{let t=e.getAttribute(m);Z(t,"Resize handle element has no handle id attribute");let[a,u]=function(e,t,n,r=document){var l,a,i,o;let u=es(t,r),s=ea(e,r),c=u?s.indexOf(u):-1;return[null!=(l=null==(a=n[c])?void 0:a.id)?l:null,null!=(i=null==(o=n[c+1])?void 0:o.id)?i:null]}(n,t,l,i);if(null==a||null==u)return()=>{};let s=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let u=l.findIndex(e=>e.id===a);if(u>=0){let e=l[u];Z(e,`No panel data found for index ${u}`);let a=r[u],{collapsedSize:s=0,collapsible:c,minSize:d=0}=e.constraints;if(null!=a&&c){let e=el({delta:en(a,s)?d-s:s-a,initialLayout:r,panelConstraints:l.map(e=>e.constraints),pivotIndices:eo(n,t,i),prevLayout:r,trigger:"keyboard"});r!==e&&o(e)}}}};return e.addEventListener("keydown",s),()=>{e.removeEventListener("keydown",s)}});return()=>{u.forEach(e=>e())}},[i,e,t,n,r,l,o])}({committedValuesRef:A,eagerValuesRef:$,groupId:y,layout:z,panelDataArray:$.current.panelDataArray,setLayout:S,panelGroupElement:x.current}),(0,a.useEffect)(()=>{let{panelDataArray:t}=$.current;if(e){if(0===z.length||z.length!==t.length)return;let n=ew[e];null==n&&(n=function(e,t=10){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}(ey,100),ew[e]=n),n(e,[...t],new Map(L.current),z,s)}},[e,z,s]),(0,a.useEffect)(()=>{});let M=(0,a.useCallback)(e=>{let{onLayout:t}=A.current,{layout:n,panelDataArray:r}=$.current;if(e.constraints.collapsible){let l=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:i,pivotIndices:o}=ek(r,e,n);if(Z(null!=i,`Panel size not found for panel "${e.id}"`),!et(i,a)){L.current.set(e.id,i);let u=el({delta:eS(r,e)===r.length-1?i-a:a-i,initialLayout:n,panelConstraints:l,pivotIndices:o,prevLayout:n,trigger:"imperative-api"});ep(n,u)||(S(u),$.current.layout=u,t&&t(u),ef(r,u,R.current))}}},[]),F=(0,a.useCallback)((e,t)=>{let{onLayout:n}=A.current,{layout:r,panelDataArray:l}=$.current;if(e.constraints.collapsible){let a=l.map(e=>e.constraints),{collapsedSize:i=0,panelSize:o=0,minSize:u=0,pivotIndices:s}=ek(l,e,r),c=null!=t?t:u;if(et(o,i)){let t=L.current.get(e.id),i=null!=t&&t>=c?t:c,u=el({delta:eS(l,e)===l.length-1?o-i:i-o,initialLayout:r,panelConstraints:a,pivotIndices:s,prevLayout:r,trigger:"imperative-api"});ep(r,u)||(S(u),$.current.layout=u,n&&n(u),ef(l,u,R.current))}}},[]),B=(0,a.useCallback)(e=>{let{layout:t,panelDataArray:n}=$.current,{panelSize:r}=ek(n,e,t);return Z(null!=r,`Panel size not found for panel "${e.id}"`),r},[]),H=(0,a.useCallback)((e,t)=>{let{panelDataArray:n}=$.current,r=eS(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:l,precision:a=3}){let i=n[l];return{flexBasis:0,flexGrow:null==i?void 0!=e?e.toFixed(a):"1":1===r.length?"1":i.toFixed(a),flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:w,layout:z,panelData:n,panelIndex:r})},[w,z]),G=(0,a.useCallback)(e=>{let{layout:t,panelDataArray:n}=$.current,{collapsedSize:r=0,collapsible:l,panelSize:a}=ek(n,e,t);return Z(null!=a,`Panel size not found for panel "${e.id}"`),!0===l&&et(a,r)},[]),W=(0,a.useCallback)(e=>{let{layout:t,panelDataArray:n}=$.current,{collapsedSize:r=0,collapsible:l,panelSize:a}=ek(n,e,t);return Z(null!=a,`Panel size not found for panel "${e.id}"`),!l||ee(a,r)>0},[]),K=(0,a.useCallback)(e=>{let{panelDataArray:t}=$.current;t.push(e),t.sort((e,t)=>{let n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),$.current.panelDataArrayChanged=!0,k()},[k]);g(()=>{if($.current.panelDataArrayChanged){$.current.panelDataArrayChanged=!1;let{autoSaveId:n,onLayout:r,storage:l}=A.current,{layout:a,panelDataArray:i}=$.current,o=null;if(n){var e,t;let r=null!=(t=(null!=(e=ev(n,l))?e:{})[eh(i)])?t:null;r&&(L.current=new Map(Object.entries(r.expandToSizes)),o=r.layout)}null==o&&(o=function({panelDataArray:e}){let t=Array(e.length),n=e.map(e=>e.constraints),r=0,l=100;for(let a=0;a<e.length;a++){let e=n[a];Z(e,`Panel constraints not found for index ${a}`);let{defaultSize:i}=e;null!=i&&(r++,t[a]=i,l-=i)}for(let a=0;a<e.length;a++){let i=n[a];Z(i,`Panel constraints not found for index ${a}`);let{defaultSize:o}=i;if(null!=o)continue;let u=l/(e.length-r);r++,t[a]=u,l-=u}return t}({panelDataArray:i}));let u=eb({layout:o,panelConstraints:i.map(e=>e.constraints)});ec(a,u)||(S(u),$.current.layout=u,r&&r(u),ef(i,u,R.current))}}),g(()=>{let e=$.current;return()=>{e.layout=[]}},[]);let _=(0,a.useCallback)(e=>{let t=!1,n=x.current;return n&&"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0),function(n){var r,l;n.preventDefault();let a=x.current;if(!a)return()=>null;let{direction:i,dragState:o,id:u,keyboardResizeBy:s,onLayout:c}=A.current,{layout:d,panelDataArray:p}=$.current,{initialLayout:m}=null!=o?o:{},g=eo(u,e,a),h=function(e,t,n,r,l,a){if(C(e)){let t="horizontal"===n,r=0;r=e.shiftKey?100:null!=l?l:10;let a=0;switch(e.key){case"ArrowDown":a=t?0:r;break;case"ArrowLeft":a=t?-r:0;break;case"ArrowRight":a=t?r:0;break;case"ArrowUp":a=t?0:-r;break;case"End":a=100;break;case"Home":a=-100}return a}return null==r?0:function(e,t,n,r,l){let a="horizontal"===n,i=es(t,l);Z(i,`No resize handle element found for id "${t}"`);let o=i.getAttribute(f);Z(o,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r,s=ed(n,e),c=eu(o,l);Z(c,`No group element found for id "${o}"`);let d=c.getBoundingClientRect();return(s-u)/(a?d.width:d.height)*100}(e,t,n,r,a)}(n,e,i,o,s,a),v="horizontal"===i;v&&t&&(h=-h);let y=el({delta:h,initialLayout:null!=m?m:d,panelConstraints:p.map(e=>e.constraints),pivotIndices:g,prevLayout:d,trigger:C(n)?"keyboard":"mouse-or-touch"}),b=!ep(d,y);(I(n)||N(n))&&P.current!=h&&((P.current=h,b||0===h)?U.set(e,0):v?(r=h<0?j:D,U.set(e,r)):(l=h<0?T:O,U.set(e,l))),b&&(S(y),$.current.layout=y,c&&c(y),ef(p,y,R.current))}},[]),J=(0,a.useCallback)((e,t)=>{let{onLayout:n}=A.current,{layout:r,panelDataArray:l}=$.current,a=l.map(e=>e.constraints),{panelSize:i,pivotIndices:o}=ek(l,e,r);Z(null!=i,`Panel size not found for panel "${e.id}"`);let u=el({delta:eS(l,e)===l.length-1?i-t:t-i,initialLayout:r,panelConstraints:a,pivotIndices:o,prevLayout:r,trigger:"imperative-api"});ep(r,u)||(S(u),$.current.layout=u,n&&n(u),ef(l,u,R.current))},[]),V=(0,a.useCallback)((e,t)=>{let{layout:n,panelDataArray:r}=$.current,{collapsedSize:l=0,collapsible:a}=t,{collapsedSize:i=0,collapsible:o,maxSize:u=100,minSize:s=0}=e.constraints,{panelSize:c}=ek(r,e,n);null!=c&&(a&&o&&et(c,l)?et(l,i)||J(e,i):c<s?J(e,s):c>u&&J(e,u))},[J]),q=(0,a.useCallback)((e,t)=>{let{direction:n}=A.current,{layout:r}=$.current;if(!x.current)return;let l=es(e,x.current);Z(l,`Drag handle element not found for id "${e}"`);let a=ed(n,t);E({dragHandleId:e,dragHandleRect:l.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),X=(0,a.useCallback)(()=>{E(null)},[]),Y=(0,a.useCallback)(e=>{let{panelDataArray:t}=$.current,n=eS(t,e);n>=0&&(t.splice(n,1),delete R.current[e.id],$.current.panelDataArrayChanged=!0,k())},[k]),Q=(0,a.useMemo)(()=>({collapsePanel:M,direction:r,dragState:w,expandPanel:F,getPanelSize:B,getPanelStyle:H,groupId:y,isPanelCollapsed:G,isPanelExpanded:W,reevaluatePanelConstraints:V,registerPanel:K,registerResizeHandle:_,resizePanel:J,startDragging:q,stopDragging:X,unregisterPanel:Y,panelGroupElement:x.current}),[M,w,r,F,B,H,y,G,W,V,K,_,J,q,X,Y]);return(0,a.createElement)(c.Provider,{value:Q},(0,a.createElement)(h,{...v,children:t,className:n,id:i,ref:x,style:{display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%",...p},"data-panel-group":"",[d]:r,[f]:y}))}let ez=(0,a.forwardRef)((e,t)=>(0,a.createElement)(eE,{...e,forwardedRef:t}));function eS(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function ek(e,t,n){let r=eS(e,t),l=r===e.length-1,a=n[r];return{...t.constraints,panelSize:a,pivotIndices:l?[r-1,r]:[r,r+1]}}function eC({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:l,onBlur:i,onClick:o,onDragging:u,onFocus:s,onPointerDown:h,onPointerUp:v,style:y={},tabIndex:x=0,tagName:w="div",...E}){var z,S;let k=(0,a.useRef)(null),C=(0,a.useRef)({onClick:o,onDragging:u,onPointerDown:h,onPointerUp:v});(0,a.useEffect)(()=>{C.current.onClick=o,C.current.onDragging=u,C.current.onPointerDown=h,C.current.onPointerUp=v});let I=(0,a.useContext)(c);if(null===I)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:N,groupId:R,registerResizeHandle:L,startDragging:P,stopDragging:A,panelGroupElement:$}=I,M=b(l),[j,D]=(0,a.useState)("inactive"),[T,O]=(0,a.useState)(!1),[F,H]=(0,a.useState)(null),K=(0,a.useRef)({state:j});g(()=>{K.current.state=j}),(0,a.useEffect)(()=>{if(n)H(null);else{let e=L(M);H(()=>e)}},[n,M,L]);let _=null!=(z=null==r?void 0:r.coarse)?z:15,J=null!=(S=null==r?void 0:r.fine)?S:5;return(0,a.useEffect)(()=>{if(n||null==F)return;let e=k.current;Z(e,"Element ref not attached");let t=!1;return function(e,t,n,r,l){var a;let{ownerDocument:i}=t,o={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:l},u=null!=(a=G.get(i))?a:0;return G.set(i,u+1),W.add(o),Y(),function(){var t;U.delete(e),W.delete(o);let n=null!=(t=G.get(i))?t:1;if(G.set(i,n-1),Y(),1===n&&G.delete(i),B.includes(o)){let e=B.indexOf(o);e>=0&&B.splice(e,1),X(),l("up",!0,null)}}}(M,e,N,{coarse:_,fine:J},(e,n,r)=>{if(!n)return void D("inactive");switch(e){case"down":{D("drag"),t=!1,Z(r,'Expected event to be defined for "down" action'),P(M,r);let{onDragging:e,onPointerDown:n}=C.current;null==e||e(!0),null==n||n();break}case"move":{let{state:e}=K.current;t=!0,"drag"!==e&&D("hover"),Z(r,'Expected event to be defined for "move" action'),F(r);break}case"up":{D("hover"),A();let{onClick:e,onDragging:n,onPointerUp:r}=C.current;null==n||n(!1),null==r||r(),t||null==e||e()}}})},[_,N,n,J,L,M,F,P,A]),!function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){(0,a.useEffect)(()=>{if(e||null==n||null==r)return;let l=es(t,r);if(null==l)return;let a=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();let n=l.getAttribute(f);Z(n,`No group element found for id "${n}"`);let a=ea(n,r),i=ei(n,t,r);Z(null!==i,`No resize element found for id "${t}"`);let o=e.shiftKey?i>0?i-1:a.length-1:i+1<a.length?i+1:0;a[o].focus()}}};return l.addEventListener("keydown",a),()=>{l.removeEventListener("keydown",a)}},[r,e,t,n])}({disabled:n,handleId:M,resizeHandler:F,panelGroupElement:$}),(0,a.createElement)(w,{...E,children:e,className:t,id:l,onBlur:()=>{O(!1),null==i||i()},onFocus:()=>{O(!0),null==s||s()},ref:k,role:"separator",style:{touchAction:"none",userSelect:"none",...y},tabIndex:x,[d]:N,[f]:R,[p]:"","data-resize-handle-active":"drag"===j?"pointer":T?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,[m]:M,"data-resize-handle-state":j})}eE.displayName="PanelGroup",ez.displayName="forwardRef(PanelGroup)",eC.displayName="PanelResizeHandle";var eI=e.i(47163);function eN({className:e,...t}){return(0,l.jsx)(ez,{"data-slot":"resizable-panel-group",className:(0,eI.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t})}function eR({...e}){return(0,l.jsx)(w,{"data-slot":"resizable-panel",...e})}function eL({withHandle:e,className:t,...n}){return(0,l.jsx)(eC,{"data-slot":"resizable-handle",className:(0,eI.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&(0,l.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,l.jsx)(s,{className:"size-2.5"})})})}var eP=e.i(13016);let eA=r.default.env.NEXT_PUBLIC_DRAWIO_BASE_URL||"https://embed.diagrams.net";function e$(){let{drawioRef:e,handleDiagramExport:t,onDrawioLoad:n,resetDrawioReady:r,saveDiagramToStorage:s,showSaveDialog:c,setShowSaveDialog:d}=(0,eP.useDiagram)(),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!0),[h,v]=(0,a.useState)("min"),[y,b]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),[E,z]=(0,a.useState)(!1),S=(0,a.useRef)(null),k=(0,a.useRef)(!1),C=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!c){let e=setTimeout(()=>{k.current=!1},1e3);return()=>clearTimeout(e)}},[c]);let I=(0,a.useCallback)(()=>{!C.current||k.current||(k.current=!0,d(!0))},[d]);(0,a.useEffect)(()=>{let e=localStorage.getItem("drawio-theme");("min"===e||"sketch"===e)&&v(e);let t=localStorage.getItem("next-ai-draw-io-dark-mode");if(null!==t){let e="true"===t;b(e),document.documentElement.classList.toggle("dark",e)}else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;b(e),document.documentElement.classList.toggle("dark",e)}"true"===localStorage.getItem(u.STORAGE_CLOSE_PROTECTION_KEY)&&z(!0),w(!0)},[]);let N=async()=>{await s();let e=!y;b(e),localStorage.setItem("next-ai-draw-io-dark-mode",String(e)),document.documentElement.classList.toggle("dark",e),r()},R=async()=>{await s();let e="min"===h?"sketch":"min";localStorage.setItem("drawio-theme",e),v(e),r()};(0,a.useEffect)(()=>{let e=()=>{p(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let L=()=>{let e=S.current;e&&(e.isCollapsed()?(e.expand(),g(!0)):(e.collapse(),g(!1)))};return(0,a.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"b"===e.key&&(e.preventDefault(),L())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,a.useEffect)(()=>{if(!E)return;let e=e=>(e.preventDefault(),"");return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[E]),(0,l.jsx)("div",{className:"h-screen bg-background relative overflow-hidden",children:(0,l.jsxs)(eN,{id:"main-panel-group",direction:f?"vertical":"horizontal",className:"h-full",children:[(0,l.jsx)(eR,{id:"drawio-panel",defaultSize:f?50:67,minSize:20,children:(0,l.jsx)("div",{className:`h-full relative ${f?"p-1":"p-2"}`,onMouseEnter:()=>{C.current=!0},onMouseLeave:()=>{C.current=!1},children:(0,l.jsx)("div",{className:"h-full rounded-xl overflow-hidden shadow-soft-lg border border-border/30",children:x?(0,l.jsx)(i,{ref:e,onExport:t,onLoad:n,onSave:I,baseUrl:eA,urlParameters:{ui:h,spin:!0,libraries:!1,saveAndExit:!1,noExitBtn:!0,dark:y}},`${h}-${y}`):(0,l.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-background",children:(0,l.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})})})})}),(0,l.jsx)(eL,{withHandle:!0}),(0,l.jsx)(eR,{id:"chat-panel",ref:S,defaultSize:f?50:33,minSize:f?20:15,maxSize:f?80:50,collapsible:!f,collapsedSize:3*!f,onCollapse:()=>g(!1),onExpand:()=>g(!0),children:(0,l.jsx)("div",{className:`h-full ${f?"p-1":"py-2 pr-2"}`,children:(0,l.jsx)(o.default,{isVisible:m,onToggleVisibility:L,drawioUi:h,onToggleDrawioUi:R,darkMode:y,onToggleDarkMode:N,isMobile:f,onCloseProtectionChange:z})})})]},f?"mobile":"desktop")})}e.s(["default",()=>e$],31713)}]);